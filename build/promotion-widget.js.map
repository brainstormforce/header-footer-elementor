{"version":3,"file":"promotion-widget.js","mappings":"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","sources":["webpack://header-footer-elementor/webpack/bootstrap","webpack://header-footer-elementor/webpack/runtime/compat get default export","webpack://header-footer-elementor/webpack/runtime/define property getters","webpack://header-footer-elementor/webpack/runtime/hasOwnProperty shorthand","webpack://header-footer-elementor/external window [\"wp\",\"domReady\"]","webpack://header-footer-elementor/external window [\"wp\",\"element\"]","webpack://header-footer-elementor/./src/Components/PromotionWidget.jsx","webpack://header-footer-elementor/./src/promotion-widget.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"domReady\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","import { useEffect } from '@wordpress/element';\n\nconst PromotionWidget = () => {\n    useEffect(() => {\n        // Global variables to track state\n        let lastClickedWidgetType = null;\n        let continuousCheckInterval = null;\n        \n        // Function to customize the promotion dialog\n        const customizePromotionDialog = (forceUaeWidget = false) => {\n            const dialog = parent.document.querySelector('#elementor-element--promotion__dialog');\n            if (!dialog) return false;\n            \n            const defaultBtn = dialog.querySelector('.dialog-buttons-action:not(.uae-upgrade-button)');\n            if (!defaultBtn) return false;\n            \n            // Determine if we should show our button\n            const shouldShowUaeButton = forceUaeWidget || lastClickedWidgetType === 'uae';\n            \n            // Clean up any previous custom buttons to avoid duplicates\n            const existingCustomBtns = dialog.querySelectorAll('.uae-upgrade-button');\n            existingCustomBtns.forEach(btn => btn.remove());\n            \n            if (shouldShowUaeButton) {\n                // Hide the default button\n                defaultBtn.style.display = 'none';\n                \n                // Create our custom button\n                const button = document.createElement('a');\n                button.textContent = 'Upgrade to Pro';\n                button.setAttribute('href', 'https://ultimateelementor.com/pricing/?utm_source=plugin-editor&utm_medium=widget-promo&utm_campaign=uae-upgrade');\n                button.setAttribute('target', '_blank');\n                button.classList.add(\n                    'dialog-button', \n                    'dialog-action', \n                    'dialog-buttons-action', \n                    'elementor-button', \n                    'go-pro', \n                    'elementor-button-success', \n                    'uae-upgrade-button'\n                );\n                \n                // Insert our button\n                defaultBtn.insertAdjacentElement('afterend', button);\n                \n                // Add event listener to prevent default behavior\n                button.addEventListener('click', (e) => {\n                    e.stopPropagation();\n                });\n                \n                // Mark the dialog as customized\n                dialog.setAttribute('data-uae-customized', 'true');\n                \n                console.log('UAE: Added custom button, hid default button');\n                return true;\n            } else {\n                // Not our widget, make sure default button is visible\n                defaultBtn.style.display = '';\n                dialog.removeAttribute('data-uae-customized');\n                console.log('UAE: Showing default button only');\n                return true;\n            }\n        };\n        \n        // Function to check if a widget is a UAE widget\n        const isUaeWidget = (widget) => {\n            if (!widget) return false;\n            \n            // Check if it has the hfe class in the icon\n            const icon = widget.querySelector('.icon > i');\n            const hasHfeClass = icon && icon.className.includes('hfe');\n            \n            // Check if it's in our category\n            const isInUaeCategory = widget.closest('#elementor-panel-category-hfe-widgets') !== null;\n            \n            return hasHfeClass && isInUaeCategory;\n        };\n        \n        // Function to start continuous checking for dialog changes\n        const startContinuousCheck = () => {\n            // Clear any existing interval\n            if (continuousCheckInterval) {\n                clearInterval(continuousCheckInterval);\n            }\n            \n            // Set up a new interval to check every 100ms\n            continuousCheckInterval = setInterval(() => {\n                const dialog = parent.document.querySelector('#elementor-element--promotion__dialog');\n                if (!dialog) return;\n                \n                if (lastClickedWidgetType === 'uae') {\n                    const defaultBtn = dialog.querySelector('.dialog-buttons-action:not(.uae-upgrade-button)');\n                    const customBtn = dialog.querySelector('.uae-upgrade-button');\n                    \n                    // If default button is visible or our button is missing, fix it\n                    if ((defaultBtn && defaultBtn.style.display !== 'none') || !customBtn) {\n                        customizePromotionDialog(true);\n                    }\n                }\n            }, 100);\n            \n            // Safety timeout to stop checking after 10 seconds\n            setTimeout(() => {\n                if (continuousCheckInterval) {\n                    clearInterval(continuousCheckInterval);\n                    continuousCheckInterval = null;\n                }\n            }, 10000);\n        };\n        \n        // Handle clicks on promotion widgets\n        const handleProWidgetClick = (e) => {\n            // Find the clicked promotion widget\n            let clickedWidget = null;\n            const allProWidgets = parent.document.querySelectorAll('.elementor-element--promotion');\n            \n            for (let i = 0; i < allProWidgets.length; i++) {\n                if (allProWidgets[i].contains(e.target)) {\n                    clickedWidget = allProWidgets[i];\n                    break;\n                }\n            }\n            \n            if (!clickedWidget) return;\n            \n            // Check if it's our widget\n            const isUae = isUaeWidget(clickedWidget);\n            \n            // Update the last clicked widget type\n            lastClickedWidgetType = isUae ? 'uae' : 'other';\n            console.log('UAE: Widget clicked, type:', lastClickedWidgetType);\n            \n            // Start continuous checking for dialog changes\n            startContinuousCheck();\n            \n            // Also set up multiple immediate checks with increasing delays\n            const delays = [10, 30, 50, 100, 200, 300, 500, 1000, 1500, 2000];\n            delays.forEach(delay => {\n                setTimeout(() => {\n                    const dialog = parent.document.querySelector('#elementor-element--promotion__dialog');\n                    if (dialog) {\n                        customizePromotionDialog(isUae);\n                    }\n                }, delay);\n            });\n        };\n        \n        // Create a mutation observer to watch for dialog changes\n        const createDialogObserver = () => {\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    // Look for added nodes that might be the dialog\n                    if (mutation.addedNodes.length) {\n                        for (const node of mutation.addedNodes) {\n                            if (node.id === 'elementor-element--promotion__dialog') {\n                                // Dialog was just added, customize it\n                                customizePromotionDialog(lastClickedWidgetType === 'uae');\n                                startContinuousCheck();\n                            }\n                        }\n                    }\n                    \n                    // Also check for attribute changes on the dialog\n                    if (mutation.type === 'attributes' && \n                        mutation.target.id === 'elementor-element--promotion__dialog') {\n                        if (lastClickedWidgetType === 'uae') {\n                            customizePromotionDialog(true);\n                        }\n                    }\n                }\n                \n                // Always check if dialog exists and needs customization\n                const dialog = parent.document.querySelector('#elementor-element--promotion__dialog');\n                if (dialog && lastClickedWidgetType === 'uae') {\n                    const defaultBtn = dialog.querySelector('.dialog-buttons-action:not(.uae-upgrade-button)');\n                    const customBtn = dialog.querySelector('.uae-upgrade-button');\n                    \n                    // If default button is visible or our button is missing, fix it\n                    if ((defaultBtn && defaultBtn.style.display !== 'none') || !customBtn) {\n                        customizePromotionDialog(true);\n                    }\n                }\n            });\n            \n            // Observe the body for changes\n            if (parent.document.body) {\n                observer.observe(parent.document.body, { \n                    childList: true, \n                    subtree: true,\n                    attributes: true,\n                    attributeFilter: ['style', 'class', 'id']\n                });\n            }\n            \n            return observer;\n        };\n        \n        // Initialize everything\n        const initProWidgets = () => {\n            if (typeof parent.document === 'undefined') return;\n            \n            // Remove any existing event listeners to prevent duplicates\n            parent.document.removeEventListener('mousedown', handleProWidgetClick, true);\n            \n            // Add our event listener with capture phase to ensure it runs first\n            parent.document.addEventListener('mousedown', handleProWidgetClick, true);\n            \n            // Create the observer\n            const observer = createDialogObserver();\n            \n            // Check if dialog already exists\n            const existingDialog = parent.document.querySelector('#elementor-element--promotion__dialog');\n            if (existingDialog) {\n                customizePromotionDialog();\n            }\n            \n            return observer;\n        };\n        \n        // Initialize when Elementor is ready\n        let observer = null;\n        if (window.elementor) {\n            elementor.on('preview:loaded', () => {\n                observer = initProWidgets();\n            });\n        } else {\n            window.addEventListener('elementor/frontend/init', () => {\n                observer = initProWidgets();\n            });\n        }\n        \n        // Cleanup function\n        return () => {\n            if (continuousCheckInterval) {\n                clearInterval(continuousCheckInterval);\n            }\n            \n            if (observer) {\n                observer.disconnect();\n            }\n            \n            if (typeof parent.document !== 'undefined') {\n                parent.document.removeEventListener('mousedown', handleProWidgetClick, true);\n            }\n            \n            if (window.elementor && elementor.off) {\n                elementor.off('preview:loaded', initProWidgets);\n            } else {\n                window.removeEventListener('elementor/frontend/init', initProWidgets);\n            }\n        };\n    }, []);\n\n    return null;\n};\n\nexport default PromotionWidget;\n","import domReady from '@wordpress/dom-ready';\nimport { render } from '@wordpress/element';\nimport PromotionWidget from './Components/PromotionWidget';\n\ndomReady(() => {\n    const container = document.createElement('div');\n    document.body.appendChild(container);\n    render(<PromotionWidget />, container);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","useEffect","lastClickedWidgetType","continuousCheckInterval","customizePromotionDialog","forceUaeWidget","arguments","length","undefined","dialog","parent","document","querySelector","defaultBtn","shouldShowUaeButton","querySelectorAll","forEach","btn","remove","style","display","button","createElement","textContent","setAttribute","classList","add","insertAdjacentElement","addEventListener","e","stopPropagation","console","log","removeAttribute","startContinuousCheck","clearInterval","setInterval","customBtn","setTimeout","handleProWidgetClick","clickedWidget","allProWidgets","i","contains","target","isUae","widget","icon","hasHfeClass","className","includes","isInUaeCategory","closest","isUaeWidget","delay","initProWidgets","removeEventListener","observer","MutationObserver","mutations","_step","_iterator","_createForOfIteratorHelper","s","n","done","mutation","value","addedNodes","_step2","_iterator2","id","err","f","type","body","observe","childList","subtree","attributes","attributeFilter","createDialogObserver","elementor","on","disconnect","off","domReady","container","appendChild","render","React","PromotionWidget"],"sourceRoot":""}